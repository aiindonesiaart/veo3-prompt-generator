
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Prompt Veo 3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#1E40AF',
                        accent: '#60A5FA',
                        dark: '#1F2937',
                        light: '#F3F4F6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .input-field {
            transition: all 0.3s ease;
        }

        .input-field:focus {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
        }

        .section-title {
            position: relative;
            padding-left: 1rem;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 24px;
            background: #3B82F6;
            border-radius: 2px;
        }

        .template-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .template-card:hover {
            transform: translateY(-4px);
            border-color: #3B82F6;
        }

        #generatedPrompt {
            transition: all 0.3s ease;
        }

        #generatedPrompt::-webkit-scrollbar {
            width: 8px;
        }

        #generatedPrompt::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        #generatedPrompt::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        #generatedPrompt::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Add responsive styles */
        @media (max-width: 1024px) {
            .lg\:sticky {
                position: relative;
                top: 0;
            }
            
            .lg\:w-\[500px\] {
                width: 100%;
            }
        }

        /* Improve scrollbar styling */
        #generatedPrompt::-webkit-scrollbar {
            width: 6px;
        }

        #generatedPrompt::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        #generatedPrompt::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        #generatedPrompt::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Add smooth transition for sticky positioning */
        .lg\:sticky {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="font-sans">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-12 animate-fade-in">
            <h1 class="text-5xl font-bold text-dark mb-4">Generator Prompt Video Veo 3</h1>
            <p class="text-gray-600 text-lg">Buat prompt video yang menakjubkan dengan mudah</p>
        </div>
        
        <!-- AMSTAM Advertisement Banner -->
        <div class="max-w-7xl mx-auto mb-8">
            <a href="https://amstream.live" target="_blank" class="block bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                <div class="flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="text-2xl font-bold mb-2">Mau Livestreaming 24 Jam Non-Stop Tanpa Kuota?</h2>
                        <p class="text-lg opacity-90">Kunjungi AMSTREAM sekarang, Klik Disini!</p>
                    </div>
                    <div class="ml-4">
                        <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                </div>
            </a>
        </div>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto flex flex-col lg:flex-row gap-8">
            <!-- Form Section -->
            <div class="flex-1 card rounded-xl p-8">
                <form id="promptForm" class="space-y-8">
                    <!-- 1. Detail Subjek dan Aksi -->
                    <div class="bg-light/50 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">1. Detail Subjek dan Aksi</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Subjek Utama -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subjek Utama</label>
                                <input type="text" id="subject" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field" placeholder="Contoh: Seorang atlet profesional yang sedang berlari di lintasan">
                            </div>

                            <!-- Karakteristik Subjek -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Karakteristik Subjek</label>
                                <select id="subjectCharacteristics" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Pasar & Perdagangan">
                                        <option value="pedagang pasar tradisional yang ramah">Pedagang Pasar Tradisional yang Ramah</option>
                                        <option value="pedagang kaki lima yang gigih">Pedagang Kaki Lima yang Gigih</option>
                                        <option value="pedagang warung kopi yang ceria">Pedagang Warung Kopi yang Ceria</option>
                                        <option value="pedagang makanan tradisional yang bersemangat">Pedagang Makanan Tradisional yang Bersemangat</option>
                                        <option value="pedagang buah-buahan yang ramah">Pedagang Buah-buahan yang Ramah</option>
                                        <option value="pedagang ikan yang tangguh">Pedagang Ikan yang Tangguh</option>
                                        <option value="pedagang sayuran yang tekun">Pedagang Sayuran yang Tekun</option>
                                        <option value="pedagang bumbu dapur yang teliti">Pedagang Bumbu Dapur yang Teliti</option>
                                    </optgroup>
                                    <optgroup label="Pertanian & Perkebunan">
                                        <option value="petani padi yang tekun">Petani Padi yang Tekun</option>
                                        <option value="petani sayuran yang teliti">Petani Sayuran yang Teliti</option>
                                        <option value="petani buah-buahan yang sabar">Petani Buah-buahan yang Sabar</option>
                                        <option value="petani kopi yang berdedikasi">Petani Kopi yang Berdedikasi</option>
                                        <option value="petani teh yang telaten">Petani Teh yang Telaten</option>
                                        <option value="petani rempah yang cermat">Petani Rempah yang Cermat</option>
                                        <option value="petani organik yang inovatif">Petani Organik yang Inovatif</option>
                                        <option value="petani hidroponik yang modern">Petani Hidroponik yang Modern</option>
                                    </optgroup>
                                    <optgroup label="Kerajinan & Seni Tradisional">
                                        <option value="pengrajin batik yang teliti">Pengrajin Batik yang Teliti</option>
                                        <option value="pengrajin ukir kayu yang sabar">Pengrajin Ukir Kayu yang Sabar</option>
                                        <option value="pengrajin keramik yang cermat">Pengrajin Keramik yang Cermat</option>
                                        <option value="pengrajin perak yang telaten">Pengrajin Perak yang Telaten</option>
                                        <option value="pengrajin anyaman yang tekun">Pengrajin Anyaman yang Tekun</option>
                                        <option value="pengrajin tenun yang detail">Pengrajin Tenun yang Detail</option>
                                        <option value="pengrajin wayang yang kreatif">Pengrajin Wayang yang Kreatif</option>
                                        <option value="pengrajin songket yang teliti">Pengrajin Songket yang Teliti</option>
                                    </optgroup>
                                    <optgroup label="Kuliner & Makanan">
                                        <option value="juru masak tradisional yang handal">Juru Masak Tradisional yang Handal</option>
                                        <option value="pedagang sate yang ramah">Pedagang Sate yang Ramah</option>
                                        <option value="pedagang bakso yang ceria">Pedagang Bakso yang Ceria</option>
                                        <option value="pedagang nasi goreng yang lincah">Pedagang Nasi Goreng yang Lincah</option>
                                        <option value="pedagang martabak yang tekun">Pedagang Martabak yang Tekun</option>
                                        <option value="pedagang es cendol yang ramah">Pedagang Es Cendol yang Ramah</option>
                                        <option value="pedagang gorengan yang gigih">Pedagang Gorengan yang Gigih</option>
                                        <option value="pedagang rujak yang ceria">Pedagang Rujak yang Ceria</option>
                                    </optgroup>
                                    <optgroup label="Transportasi & Pengangkutan">
                                        <option value="tukang becak yang ramah">Tukang Becak yang Ramah</option>
                                        <option value="tukang ojek yang tangguh">Tukang Ojek yang Tangguh</option>
                                        <option value="tukang angkot yang ceria">Tukang Angkot yang Ceria</option>
                                        <option value="tukang delman yang sabar">Tukang Delman yang Sabar</option>
                                        <option value="tukang perahu yang berani">Tukang Perahu yang Berani</option>
                                        <option value="tukang gerobak yang gigih">Tukang Gerobak yang Gigih</option>
                                        <option value="tukang pikul yang kuat">Tukang Pikul yang Kuat</option>
                                        <option value="tukang dorong yang tekun">Tukang Dorong yang Tekun</option>
                                    </optgroup>
                                    <optgroup label="Pendidikan & Pengajaran">
                                        <option value="guru ngaji yang sabar">Guru Ngaji yang Sabar</option>
                                        <option value="guru mengaji yang telaten">Guru Mengaji yang Telaten</option>
                                        <option value="guru silat yang tegas">Guru Silat yang Tegas</option>
                                        <option value="guru tari tradisional yang luwes">Guru Tari Tradisional yang Luwes</option>
                                        <option value="guru gamelan yang teliti">Guru Gamelan yang Teliti</option>
                                        <option value="guru wayang yang bijaksana">Guru Wayang yang Bijaksana</option>
                                        <option value="guru batik yang telaten">Guru Batik yang Telaten</option>
                                        <option value="guru kerajinan yang kreatif">Guru Kerajinan yang Kreatif</option>
                                    </optgroup>
                                    <optgroup label="Kesehatan & Pengobatan">
                                        <option value="tabib tradisional yang bijaksana">Tabib Tradisional yang Bijaksana</option>
                                        <option value="dukun beranak yang sabar">Dukun Beranak yang Sabar</option>
                                        <option value="tukang pijat yang telaten">Tukang Pijat yang Telaten</option>
                                        <option value="tukang urut yang handal">Tukang Urut yang Handal</option>
                                        <option value="tukang bekam yang teliti">Tukang Bekam yang Teliti</option>
                                        <option value="tukang jamu yang cermat">Tukang Jamu yang Cermat</option>
                                        <option value="tukang akupuntur yang sabar">Tukang Akupuntur yang Sabar</option>
                                        <option value="tukang refleksi yang telaten">Tukang Refleksi yang Telaten</option>
                                    </optgroup>
                                    <optgroup label="Pertukangan & Konstruksi">
                                        <option value="tukang kayu yang teliti">Tukang Kayu yang Teliti</option>
                                        <option value="tukang batu yang kuat">Tukang Batu yang Kuat</option>
                                        <option value="tukang atap yang berani">Tukang Atap yang Berani</option>
                                        <option value="tukang listrik yang cermat">Tukang Listrik yang Cermat</option>
                                        <option value="tukang pipa yang telaten">Tukang Pipa yang Telaten</option>
                                        <option value="tukang cat yang teliti">Tukang Cat yang Teliti</option>
                                        <option value="tukang las yang tangguh">Tukang Las yang Tangguh</option>
                                        <option value="tukang ukir yang sabar">Tukang Ukir yang Sabar</option>
                                    </optgroup>
                                    <optgroup label="Perikanan & Kelautan">
                                        <option value="nelayan tradisional yang tangguh">Nelayan Tradisional yang Tangguh</option>
                                        <option value="nelayan jaring yang berani">Nelayan Jaring yang Berani</option>
                                        <option value="nelayan pancing yang sabar">Nelayan Pancing yang Sabar</option>
                                        <option value="pembudidaya ikan yang telaten">Pembudidaya Ikan yang Telaten</option>
                                        <option value="pembudidaya udang yang teliti">Pembudidaya Udang yang Teliti</option>
                                        <option value="pembudidaya rumput laut yang tekun">Pembudidaya Rumput Laut yang Tekun</option>
                                        <option value="pengolah hasil laut yang cermat">Pengolah Hasil Laut yang Cermat</option>
                                        <option value="pedagang hasil laut yang ramah">Pedagang Hasil Laut yang Ramah</option>
                                    </optgroup>
                                    <optgroup label="Seni & Hiburan">
                                        <option value="dalang wayang yang bijaksana">Dalang Wayang yang Bijaksana</option>
                                        <option value="penari tradisional yang luwes">Penari Tradisional yang Luwes</option>
                                        <option value="pemain gamelan yang teliti">Pemain Gamelan yang Teliti</option>
                                        <option value="pemain angklung yang ceria">Pemain Angklung yang Ceria</option>
                                        <option value="pemain suling yang sabar">Pemain Suling yang Sabar</option>
                                        <option value="pemain kendang yang energik">Pemain Kendang yang Energik</option>
                                        <option value="pemain rebana yang bersemangat">Pemain Rebana yang Bersemangat</option>
                                        <option value="pemain kecapi yang tenang">Pemain Kecapi yang Tenang</option>
                                    </optgroup>
                                    <optgroup label="Pembawa Acara & Presenter">
                                        <option value="pembawa acara talkshow yang interaktif">Pembawa Acara Talkshow yang Interaktif</option>
                                        <option value="pembawa acara kuis yang energik">Pembawa Acara Kuis yang Energik</option>
                                        <option value="pembawa acara musik yang dinamis">Pembawa Acara Musik yang Dinamis</option>
                                        <option value="pembawa acara variety show yang ceria">Pembawa Acara Variety Show yang Ceria</option>
                                        <option value="pembawa acara reality show yang natural">Pembawa Acara Reality Show yang Natural</option>
                                        <option value="pembawa acara dokumenter yang informatif">Pembawa Acara Dokumenter yang Informatif</option>
                                        <option value="pembawa acara cooking show yang ramah">Pembawa Acara Cooking Show yang Ramah</option>
                                        <option value="pembawa acara travel show yang antusias">Pembawa Acara Travel Show yang Antusias</option>
                                        <option value="pembawa acara lifestyle yang elegan">Pembawa Acara Lifestyle yang Elegan</option>
                                        <option value="pembawa acara olahraga yang bersemangat">Pembawa Acara Olahraga yang Bersemangat</option>
                                        <option value="pembawa berita profesional yang tegas">Pembawa Berita Profesional yang Tegas</option>
                                        <option value="pembawa berita senior yang bijaksana">Pembawa Berita Senior yang Bijaksana</option>
                                        <option value="pembawa berita muda yang dinamis">Pembawa Berita Muda yang Dinamis</option>
                                        <option value="pembawa berita olahraga yang bersemangat">Pembawa Berita Olahraga yang Bersemangat</option>
                                        <option value="pembawa berita ekonomi yang cermat">Pembawa Berita Ekonomi yang Cermat</option>
                                        <option value="pembawa berita hiburan yang ceria">Pembawa Berita Hiburan yang Ceria</option>
                                        <option value="pembawa berita politik yang serius">Pembawa Berita Politik yang Serius</option>
                                        <option value="pembawa berita teknologi yang informatif">Pembawa Berita Teknologi yang Informatif</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Aksi Utama -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Aksi Utama</label>
                                <select id="mainAction" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Aktivitas Pasar">
                                        <option value="berjualan dengan ramah">Berjualan dengan Ramah</option>
                                        <option value="menawar dengan cerdik">Menawar dengan Cerdik</option>
                                        <option value="mengatur dagangan dengan rapi">Mengatur Dagangan dengan Rapi</option>
                                        <option value="melayani pembeli dengan sopan">Melayani Pembeli dengan Sopan</option>
                                        <option value="memanggil pembeli dengan lantang">Memanggil Pembeli dengan Lantang</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Pertanian">
                                        <option value="mencangkul dengan tekun">Mencangkul dengan Tekun</option>
                                        <option value="menanam padi dengan telaten">Menanam Padi dengan Telaten</option>
                                        <option value="memetik hasil panen dengan ceria">Memetik Hasil Panen dengan Ceria</option>
                                        <option value="mengairi sawah dengan teliti">Mengairi Sawah dengan Teliti</option>
                                        <option value="merawat tanaman dengan sabar">Merawat Tanaman dengan Sabar</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Kerajinan">
                                        <option value="membatik dengan teliti">Membatik dengan Teliti</option>
                                        <option value="mengukir kayu dengan sabar">Mengukir Kayu dengan Sabar</option>
                                        <option value="menganyam dengan tekun">Menganyam dengan Tekun</option>
                                        <option value="menenun dengan telaten">Menenun dengan Telaten</option>
                                        <option value="membuat keramik dengan cermat">Membuat Keramik dengan Cermat</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Kuliner">
                                        <option value="memasak dengan semangat">Memasak dengan Semangat</option>
                                        <option value="mengaduk bumbu dengan teliti">Mengaduk Bumbu dengan Teliti</option>
                                        <option value="menggoreng dengan lincah">Menggoreng dengan Lincah</option>
                                        <option value="menyajikan makanan dengan rapi">Menyajikan Makanan dengan Rapi</option>
                                        <option value="membuat jamu dengan telaten">Membuat Jamu dengan Telaten</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Transportasi">
                                        <option value="mengayuh becak dengan gigih">Mengayuh Becak dengan Gigih</option>
                                        <option value="mengemudi ojek dengan tangguh">Mengemudi Ojek dengan Tangguh</option>
                                        <option value="mengemudi delman dengan sabar">Mengemudi Delman dengan Sabar</option>
                                        <option value="mengangkut barang dengan kuat">Mengangkut Barang dengan Kuat</option>
                                        <option value="mendorong gerobak dengan tekun">Mendorong Gerobak dengan Tekun</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Seni">
                                        <option value="mendalang wayang dengan bijaksana">Mendalang Wayang dengan Bijaksana</option>
                                        <option value="menari tradisional dengan luwes">Menari Tradisional dengan Luwes</option>
                                        <option value="memainkan gamelan dengan teliti">Memainkan Gamelan dengan Teliti</option>
                                        <option value="memainkan angklung dengan ceria">Memainkan Angklung dengan Ceria</option>
                                        <option value="menyanyi lagu daerah dengan merdu">Menyanyi Lagu Daerah dengan Merdu</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Pengobatan">
                                        <option value="mengobati dengan bijaksana">Mengobati dengan Bijaksana</option>
                                        <option value="memijat dengan telaten">Memijat dengan Telaten</option>
                                        <option value="membuat jamu dengan teliti">Membuat Jamu dengan Teliti</option>
                                        <option value="mengurut dengan handal">Mengurut dengan Handal</option>
                                        <option value="membekam dengan cermat">Membekam dengan Cermat</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Pembawa Acara">
                                        <option value="membawakan berita dengan profesional">Membawakan Berita dengan Profesional</option>
                                        <option value="mewawancarai narasumber dengan cerdas">Mewawancarai Narasumber dengan Cerdas</option>
                                        <option value="membawakan talkshow dengan interaktif">Membawakan Talkshow dengan Interaktif</option>
                                        <option value="membawakan kuis dengan energik">Membawakan Kuis dengan Energik</option>
                                        <option value="membawakan acara musik dengan dinamis">Membawakan Acara Musik dengan Dinamis</option>
                                        <option value="membawakan variety show dengan ceria">Membawakan Variety Show dengan Ceria</option>
                                        <option value="membawakan reality show dengan natural">Membawakan Reality Show dengan Natural</option>
                                        <option value="membawakan dokumenter dengan informatif">Membawakan Dokumenter dengan Informatif</option>
                                        <option value="membawakan cooking show dengan ramah">Membawakan Cooking Show dengan Ramah</option>
                                        <option value="membawakan travel show dengan antusias">Membawakan Travel Show dengan Antusias</option>
                                        <option value="membawakan lifestyle show dengan elegan">Membawakan Lifestyle Show dengan Elegan</option>
                                        <option value="membawakan acara olahraga dengan bersemangat">Membawakan Acara Olahraga dengan Bersemangat</option>
                                        <option value="membawakan breaking news dengan tegas">Membawakan Breaking News dengan Tegas</option>
                                        <option value="membawakan liputan langsung dengan tangkas">Membawakan Liputan Langsung dengan Tangkas</option>
                                        <option value="membawakan debat politik dengan bijaksana">Membawakan Debat Politik dengan Bijaksana</option>
                                        <option value="membawakan analisis ekonomi dengan cermat">Membawakan Analisis Ekonomi dengan Cermat</option>
                                        <option value="membawakan berita hiburan dengan ceria">Membawakan Berita Hiburan dengan Ceria</option>
                                        <option value="membawakan berita teknologi dengan informatif">Membawakan Berita Teknologi dengan Informatif</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Emosi -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Emosi</label>
                                <select id="emotion" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Emosi Positif">
                                        <option value="ramah tamah">Ramah Tamah</option>
                                        <option value="sopan santun">Sopan Santun</option>
                                        <option value="ikhlas">Ikhlas</option>
                                        <option value="sabar">Sabar</option>
                                        <option value="gigih">Gigih</option>
                                    </optgroup>
                                    <optgroup label="Semangat">
                                        <option value="bersemangat">Bersemangat</option>
                                        <option value="penuh semangat">Penuh Semangat</option>
                                        <option value="bergairah">Bergairah</option>
                                        <option value="antusias">Antusias</option>
                                        <option value="bersemangat tinggi">Bersemangat Tinggi</option>
                                    </optgroup>
                                    <optgroup label="Ketenangan">
                                        <option value="tenang">Tenang</option>
                                        <option value="tenteram">Tenteram</option>
                                        <option value="damai">Damai</option>
                                        <option value="nyaman">Nyaman</option>
                                        <option value="tentram">Tentram</option>
                                    </optgroup>
                                    <optgroup label="Kebahagiaan">
                                        <option value="gembira">Gembira</option>
                                        <option value="ceria">Ceria</option>
                                        <option value="bahagia">Bahagia</option>
                                        <option value="riang">Riang</option>
                                        <option value="sukacita">Sukacita</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Lingkungan dan Atmosfer -->
                    <div class="bg-light/50 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">2. Lingkungan dan Atmosfer</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Lokasi -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Lokasi</label>
                                <select id="location" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Pasar & Perdagangan">
                                        <option value="pasar tradisional yang ramai">Pasar Tradisional yang Ramai</option>
                                        <option value="pasar pagi yang sibuk">Pasar Pagi yang Sibuk</option>
                                        <option value="warung kopi yang nyaman">Warung Kopi yang Nyaman</option>
                                        <option value="kaki lima yang meriah">Kaki Lima yang Meriah</option>
                                        <option value="pasar malam yang gemerlap">Pasar Malam yang Gemerlap</option>
                                    </optgroup>
                                    <optgroup label="Pertanian & Perkebunan">
                                        <option value="sawah yang hijau">Sawah yang Hijau</option>
                                        <option value="kebun yang subur">Kebun yang Subur</option>
                                        <option value="ladang yang luas">Ladang yang Luas</option>
                                        <option value="perkebunan yang asri">Perkebunan yang Asri</option>
                                        <option value="kebun organik yang sejuk">Kebun Organik yang Sejuk</option>
                                    </optgroup>
                                    <optgroup label="Desa & Kampung">
                                        <option value="desa yang damai">Desa yang Damai</option>
                                        <option value="kampung yang asri">Kampung yang Asri</option>
                                        <option value="pedesaan yang sejuk">Pedesaan yang Sejuk</option>
                                        <option value="perkampungan yang ramai">Perkampungan yang Ramai</option>
                                        <option value="lingkungan yang rukun">Lingkungan yang Rukun</option>
                                    </optgroup>
                                    <optgroup label="Pesisir & Laut">
                                        <option value="pantai yang indah">Pantai yang Indah</option>
                                        <option value="pelabuhan yang ramai">Pelabuhan yang Ramai</option>
                                        <option value="pulau yang sepi">Pulau yang Sepi</option>
                                        <option value="pesisir yang tenang">Pesisir yang Tenang</option>
                                        <option value="teluk yang menawan">Teluk yang Menawan</option>
                                    </optgroup>
                                    <optgroup label="Kota & Perkotaan">
                                        <option value="kota yang ramai">Kota yang Ramai</option>
                                        <option value="perkotaan yang modern">Perkotaan yang Modern</option>
                                        <option value="pusat kota yang sibuk">Pusat Kota yang Sibuk</option>
                                        <option value="kawasan yang berkembang">Kawasan yang Berkembang</option>
                                        <option value="lingkungan yang dinamis">Lingkungan yang Dinamis</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Waktu -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Waktu</label>
                                <select id="time" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Pagi">
                                        <option value="subuh yang sejuk">Subuh yang Sejuk</option>
                                        <option value="pagi yang cerah">Pagi yang Cerah</option>
                                        <option value="fajar yang menyejukkan">Fajar yang Menyejukkan</option>
                                        <option value="pagi buta yang dingin">Pagi Buta yang Dingin</option>
                                        <option value="matahari terbit yang indah">Matahari Terbit yang Indah</option>
                                    </optgroup>
                                    <optgroup label="Siang">
                                        <option value="siang yang terik">Siang yang Terik</option>
                                        <option value="tengah hari yang panas">Tengah Hari yang Panas</option>
                                        <option value="dzuhur yang terang">Dzuhur yang Terang</option>
                                        <option value="siang bolong yang terik">Siang Bolong yang Terik</option>
                                        <option value="ashar yang hangat">Ashar yang Hangat</option>
                                    </optgroup>
                                    <optgroup label="Sore">
                                        <option value="sore yang hangat">Sore yang Hangat</option>
                                        <option value="senja yang romantis">Senja yang Romantis</option>
                                        <option value="maghrib yang indah">Maghrib yang Indah</option>
                                        <option value="petang yang sejuk">Petang yang Sejuk</option>
                                        <option value="sore hari yang tenang">Sore Hari yang Tenang</option>
                                    </optgroup>
                                    <optgroup label="Malam">
                                        <option value="malam yang sejuk">Malam yang Sejuk</option>
                                        <option value="malam hari yang tenang">Malam Hari yang Tenang</option>
                                        <option value="isya yang damai">Isya yang Damai</option>
                                        <option value="tengah malam yang sunyi">Tengah Malam yang Sunyi</option>
                                        <option value="dini hari yang sepi">Dini Hari yang Sepi</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Cuaca -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Cuaca</label>
                                <select id="weather" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Cerah">
                                        <option value="cerah berkilau">Cerah Berkilau</option>
                                        <option value="terang benderang">Terang Benderang</option>
                                        <option value="matahari bersinar terang">Matahari Bersinar Terang</option>
                                        <option value="langit biru jernih">Langit Biru Jernih</option>
                                        <option value="cuaca cerah ceria">Cuaca Cerah Ceria</option>
                                    </optgroup>
                                    <optgroup label="Hujan">
                                        <option value="hujan rintik-rintik">Hujan Rintik-rintik</option>
                                        <option value="hujan gerimis">Hujan Gerimis</option>
                                        <option value="hujan deras">Hujan Deras</option>
                                        <option value="hujan lebat">Hujan Lebat</option>
                                        <option value="hujan badai">Hujan Badai</option>
                                    </optgroup>
                                    <optgroup label="Berawan">
                                        <option value="berawan lembut">Berawan Lembut</option>
                                        <option value="mendung">Mendung</option>
                                        <option value="awan mendung">Awan Mendung</option>
                                        <option value="berawan tebal">Berawan Tebal</option>
                                        <option value="mendung gelap">Mendung Gelap</option>
                                    </optgroup>
                                    <optgroup label="Khusus">
                                        <option value="angin sepoi-sepoi">Angin Sepoi-sepoi</option>
                                        <option value="angin kencang">Angin Kencang</option>
                                        <option value="berkabut">Berkabut</option>
                                        <option value="embun pagi">Embun Pagi</option>
                                        <option value="udara sejuk">Udara Sejuk</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Musim -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Musim</label>
                                <select id="season" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <optgroup label="Musim Kemarau">
                                        <option value="kemarau yang terik">Kemarau yang Terik</option>
                                        <option value="musim kering">Musim Kering</option>
                                        <option value="panas terik">Panas Terik</option>
                                        <option value="kekeringan">Kekeringan</option>
                                        <option value="kemarau panjang">Kemarau Panjang</option>
                                    </optgroup>
                                    <optgroup label="Musim Hujan">
                                        <option value="hujan yang sejuk">Hujan yang Sejuk</option>
                                        <option value="musim penghujan">Musim Penghujan</option>
                                        <option value="hujan lebat">Hujan Lebat</option>
                                        <option value="musim basah">Musim Basah</option>
                                        <option value="hujan deras">Hujan Deras</option>
                                    </optgroup>
                                    <optgroup label="Peralihan">
                                        <option value="peralihan musim">Peralihan Musim</option>
                                        <option value="musim pancaroba">Musim Pancaroba</option>
                                        <option value="pergantian musim">Pergantian Musim</option>
                                        <option value="transisi musim">Transisi Musim</option>
                                        <option value="perubahan musim">Perubahan Musim</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Sinematografi -->
                    <div class="bg-light/50 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">3. Sinematografi</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Gaya -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gaya</label>
                                <select id="style" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="sinematik yang epik">Sinematik yang Epik</option>
                                    <option value="dokumenter yang mendalam">Dokumenter yang Mendalam</option>
                                    <option value="anime yang dinamis">Anime yang Dinamis</option>
                                    <option value="kartun yang ceria">Kartun yang Ceria</option>
                                    <option value="realistis yang natural">Realistis yang Natural</option>
                                    <option value="vintage yang klasik">Vintage yang Klasik</option>
                                    <option value="futuristik yang modern">Futuristik yang Modern</option>
                                    <option value="film noir yang misterius">Film Noir yang Misterius</option>
                                    <option value="komersial yang profesional">Komersial yang Profesional</option>
                                </select>
                            </div>

                            <!-- Pergerakan Kamera -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Pergerakan Kamera</label>
                                <select id="cameraMovement" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="statik yang stabil">Statik yang Stabil</option>
                                    <option value="panning yang halus">Panning yang Halus</option>
                                    <option value="dolly yang dinamis">Dolly yang Dinamis</option>
                                    <option value="tracking yang mengalir">Tracking yang Mengalir</option>
                                    <option value="drone yang spektakuler">Drone yang Spektakuler</option>
                                    <option value="crane yang elegan">Crane yang Elegan</option>
                                    <option value="steadicam yang stabil">Steadicam yang Stabil</option>
                                    <option value="handheld yang natural">Handheld yang Natural</option>
                                </select>
                            </div>

                            <!-- Sudut Kamera -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Sudut Kamera</label>
                                <select id="cameraAngle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="setinggi mata yang natural">Setinggi Mata yang Natural</option>
                                    <option value="sudut rendah yang dramatis">Sudut Rendah yang Dramatis</option>
                                    <option value="sudut tinggi yang mengesankan">Sudut Tinggi yang Mengesankan</option>
                                    <option value="sudut mata burung yang spektakuler">Sudut Mata Burung yang Spektakuler</option>
                                    <option value="sudut belanda yang dinamis">Sudut Belanda yang Dinamis</option>
                                    <option value="dari balik bahu yang intim">Dari Balik Bahu yang Intim</option>
                                </select>
                            </div>

                            <!-- Panjang Fokus -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Panjang Fokus</label>
                                <select id="focalLength" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="lebar (24mm) yang luas">Lebar (24mm) yang Luas</option>
                                    <option value="medium (50mm) yang natural">Medium (50mm) yang Natural</option>
                                    <option value="telefoto (85mm) yang intim">Telefoto (85mm) yang Intim</option>
                                    <option value="ultra lebar (16mm) yang spektakuler">Ultra Lebar (16mm) yang Spektakuler</option>
                                    <option value="makro yang detail">Makro yang Detail</option>
                                </select>
                            </div>

                            <!-- Pencahayaan -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Pencahayaan</label>
                                <select id="lighting" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="alami yang natural">Alami yang Natural</option>
                                    <option value="dramatis yang intens">Dramatis yang Intens</option>
                                    <option value="lembut yang menenangkan">Lembut yang Menenangkan</option>
                                    <option value="cahaya latar yang elegan">Cahaya Latar yang Elegan</option>
                                    <option value="studio yang profesional">Studio yang Profesional</option>
                                    <option value="rendah yang misterius">Rendah yang Misterius</option>
                                    <option value="tinggi yang ceria">Tinggi yang Ceria</option>
                                    <option value="neon yang futuristik">Neon yang Futuristik</option>
                                </select>
                            </div>

                            <!-- Gradiasi Warna -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gradiasi Warna</label>
                                <select id="colorGrading" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="alami yang natural">Alami yang Natural</option>
                                    <option value="hangat yang menyejukkan">Hangat yang Menyejukkan</option>
                                    <option value="dingin yang menenangkan">Dingin yang Menenangkan</option>
                                    <option value="vintage yang klasik">Vintage yang Klasik</option>
                                    <option value="kontras tinggi yang dramatis">Kontras Tinggi yang Dramatis</option>
                                    <option value="desaturasi yang elegan">Desaturasi yang Elegan</option>
                                    <option value="cerlang yang hidup">Cerlang yang Hidup</option>
                                    <option value="monokrom yang timeless">Monokrom yang Timeless</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Audio -->
                    <div class="bg-light/50 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">4. Audio</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Dialog -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Dialog</label>
                                <select id="dialog" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="none">Tanpa Dialog</option>
                                    <option value="narasi yang informatif">Narasi yang Informatif</option>
                                    <option value="dialog yang natural">Dialog yang Natural</option>
                                    <option value="monolog yang mendalam">Monolog yang Mendalam</option>
                                    <option value="wawancara yang profesional">Wawancara yang Profesional</option>
                                    <option value="voice over yang elegan">Voice Over yang Elegan</option>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customDialogInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan jenis dialog yang diinginkan...">
                                </div>
                            </div>

                            <!-- Karakter Dialog -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Karakter Dialog</label>
                                <select id="dialogCharacter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="none">Tidak Ada</option>
                                    <optgroup label="Pembawa Berita">
                                        <option value="pembawa berita profesional yang tegas">Pembawa Berita Profesional yang Tegas</option>
                                        <option value="pembawa berita senior yang bijaksana">Pembawa Berita Senior yang Bijaksana</option>
                                        <option value="pembawa berita muda yang dinamis">Pembawa Berita Muda yang Dinamis</option>
                                        <option value="pembawa berita olahraga yang bersemangat">Pembawa Berita Olahraga yang Bersemangat</option>
                                        <option value="pembawa berita ekonomi yang cermat">Pembawa Berita Ekonomi yang Cermat</option>
                                        <option value="pembawa berita hiburan yang ceria">Pembawa Berita Hiburan yang Ceria</option>
                                        <option value="pembawa berita politik yang serius">Pembawa Berita Politik yang Serius</option>
                                        <option value="pembawa berita teknologi yang informatif">Pembawa Berita Teknologi yang Informatif</option>
                                    </optgroup>
                                    <optgroup label="Pembawa Acara TV">
                                        <option value="pembawa acara talkshow yang interaktif">Pembawa Acara Talkshow yang Interaktif</option>
                                        <option value="pembawa acara kuis yang energik">Pembawa Acara Kuis yang Energik</option>
                                        <option value="pembawa acara musik yang dinamis">Pembawa Acara Musik yang Dinamis</option>
                                        <option value="pembawa acara variety show yang ceria">Pembawa Acara Variety Show yang Ceria</option>
                                        <option value="pembawa acara reality show yang natural">Pembawa Acara Reality Show yang Natural</option>
                                        <option value="pembawa acara dokumenter yang informatif">Pembawa Acara Dokumenter yang Informatif</option>
                                        <option value="pembawa acara cooking show yang ramah">Pembawa Acara Cooking Show yang Ramah</option>
                                        <option value="pembawa acara travel show yang antusias">Pembawa Acara Travel Show yang Antusias</option>
                                        <option value="pembawa acara lifestyle yang elegan">Pembawa Acara Lifestyle yang Elegan</option>
                                        <option value="pembawa acara olahraga yang bersemangat">Pembawa Acara Olahraga yang Bersemangat</option>
                                    </optgroup>
                                    <optgroup label="Suara Pria">
                                        <option value="pria dewasa yang profesional">Pria Dewasa yang Profesional</option>
                                        <option value="pria muda yang energik">Pria Muda yang Energik</option>
                                        <option value="pria tua yang bijaksana">Pria Tua yang Bijaksana</option>
                                        <option value="anak laki-laki yang ceria">Anak Laki-laki yang Ceria</option>
                                    </optgroup>
                                    <optgroup label="Suara Wanita">
                                        <option value="wanita dewasa yang elegan">Wanita Dewasa yang Elegan</option>
                                        <option value="wanita muda yang dinamis">Wanita Muda yang Dinamis</option>
                                        <option value="wanita tua yang bijaksana">Wanita Tua yang Bijaksana</option>
                                        <option value="anak perempuan yang ceria">Anak Perempuan yang Ceria</option>
                                    </optgroup>
                                    <optgroup label="Karakter Khusus">
                                        <option value="robot yang mekanis">Robot yang Mekanis</option>
                                        <option value="alien yang misterius">Alien yang Misterius</option>
                                        <option value="monster yang menakutkan">Monster yang Menakutkan</option>
                                        <option value="makhluk fantasi yang ajaib">Makhluk Fantasi yang Ajaib</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customDialogCharacterInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan karakter suara yang diinginkan...">
                                </div>
                            </div>

                            <!-- Isi Dialog -->
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Isi Dialog</label>
                                <div id="dialogInputs" class="space-y-4">
                                    <div class="flex gap-4 items-start">
                                        <div class="w-1/4">
                                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field dialog-character">
                                                <option value="Karakter 1">Karakter 1</option>
                                                <option value="Karakter 2">Karakter 2</option>
                                                <option value="Karakter 3">Karakter 3</option>
                                                <option value="Narator">Narator</option>
                                                <option value="Pembawa Berita">Pembawa Berita</option>
                                                <option value="custom">Input Manual</option>
                                            </select>
                                        </div>
                                        <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field" placeholder="Masukkan dialog...">
                                        <button type="button" class="text-red-500 hover:text-red-700" onclick="removeDialog(this)">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-2">
                                    <button type="button" onclick="addDialogInput()" class="text-primary hover:text-blue-700 flex items-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        Tambah Dialog
                                    </button>
                                    <button type="button" onclick="addDialogCharacter()" class="text-primary hover:text-blue-700 flex items-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        Tambah Karakter
                                    </button>
                                </div>
                            </div>

                            <!-- Suasana Suara -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Suasana Suara</label>
                                <select id="voiceMood" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="none">Tidak Ada</option>
                                    <optgroup label="Emosi">
                                        <option value="gembira yang ceria">Gembira yang Ceria</option>
                                        <option value="sedih yang mengharukan">Sedih yang Mengharukan</option>
                                        <option value="marah yang tegas">Marah yang Tegas</option>
                                        <option value="tenang yang menenangkan">Tenang yang Menenangkan</option>
                                    </optgroup>
                                    <optgroup label="Suasana">
                                        <option value="ramai yang dinamis">Ramai yang Dinamis</option>
                                        <option value="sepi yang misterius">Sepi yang Misterius</option>
                                        <option value="khidmat yang sakral">Khidmat yang Sakral</option>
                                        <option value="riuh yang meriah">Riuh yang Meriah</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customVoiceMoodInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan suasana suara yang diinginkan...">
                                </div>
                            </div>

                            <!-- Musik Latar -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Musik Latar</label>
                                <select id="backgroundMusic" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field mb-2">
                                    <option value="none">Tanpa Musik</option>
                                    <optgroup label="Genre">
                                        <option value="instrumental yang elegan">Instrumental yang Elegan</option>
                                        <option value="pop yang energik">Pop yang Energik</option>
                                        <option value="klasik yang megah">Klasik yang Megah</option>
                                        <option value="ambient yang menenangkan">Ambient yang Menenangkan</option>
                                        <option value="elektronik yang futuristik">Elektronik yang Futuristik</option>
                                        <option value="jazz yang sofistikated">Jazz yang Sofistikated</option>
                                        <option value="rock yang powerful">Rock yang Powerful</option>
                                    </optgroup>
                                    <optgroup label="Suasana">
                                        <option value="dramatis yang intens">Dramatis yang Intens</option>
                                        <option value="romantis yang lembut">Romantis yang Lembut</option>
                                        <option value="misterius yang mendalam">Misterius yang Mendalam</option>
                                        <option value="ceria yang ceria">Ceria yang Ceria</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customMusicInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan musik yang diinginkan...">
                                </div>
                            </div>

                            <!-- Efek Suara -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Efek Suara</label>
                                <select id="soundEffects" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field mb-2">
                                    <option value="none">Tanpa Efek</option>
                                    <optgroup label="Alam">
                                        <option value="hujan yang menyejukkan">Hujan yang Menyejukkan</option>
                                        <option value="angin yang sepoi-sepoi">Angin yang Sepoi-sepoi</option>
                                        <option value="ombak yang tenang">Ombak yang Tenang</option>
                                        <option value="burung yang berkicau">Burung yang Berkicau</option>
                                    </optgroup>
                                    <optgroup label="Perkotaan">
                                        <option value="keramaian kota yang dinamis">Keramaian Kota yang Dinamis</option>
                                        <option value="kendaraan yang lalu lalang">Kendaraan yang Lalu Lalang</option>
                                        <option value="keramaian pasar yang meriah">Keramaian Pasar yang Meriah</option>
                                        <option value="suara kereta yang megah">Suara Kereta yang Megah</option>
                                    </optgroup>
                                    <optgroup label="Atmosfer">
                                        <option value="ambient yang atmosferik">Ambient yang Atmosferik</option>
                                        <option value="foley yang realistis">Foley yang Realistis</option>
                                        <option value="atmosferik yang mendalam">Atmosferik yang Mendalam</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customSoundEffectsInput" class="hidden">
                                    <div id="soundEffectsInputs" class="space-y-2">
                                        <div class="flex gap-2">
                                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan efek suara...">
                                            <button type="button" class="text-red-500 hover:text-red-700" onclick="removeSoundEffect(this)">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <button type="button" onclick="addSoundEffect()" class="mt-2 text-primary hover:text-blue-700 flex items-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        Tambah Efek Suara
                                    </button>
                                </div>
                            </div>

                            <!-- Volume -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Volume</label>
                                <select id="volume" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="rendah yang halus">Rendah yang Halus</option>
                                    <option value="sedang yang seimbang">Sedang yang Seimbang</option>
                                    <option value="tinggi yang powerful">Tinggi yang Powerful</option>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customVolumeInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan volume yang diinginkan...">
                                </div>
                            </div>

                            <!-- Background Music -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Background Music</label>
                                <select id="backgroundMusic" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="none">No Background Music</option>
                                    <option value="dangdut koplo">Dangdut Koplo</option>
                                    <option value="ambient yang menenangkan">Ambient yang Menenangkan</option>
                                    <option value="orchestra yang megah">Orchestra yang Megah</option>
                                    <option value="electronic yang energik">Electronic yang Energik</option>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customMusicInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Deskripsikan jenis musik yang diinginkan...">
                                </div>
                            </div>

                            <!-- Audio Translation -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Audio Translation</label>
                                <select id="audioTranslation" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="none">No Translation</option>
                                    <option value="english">Translate to English (Keep Dialog Original)</option>
                                    <option value="full_english">Full English Translation</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 5. Parameter Teknis dan Tambahan -->
                    <div class="bg-light/50 p-6 rounded-lg">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">5. Parameter Teknis dan Tambahan</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Kualitas Video -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kualitas Video</label>
                                <select id="videoQuality" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                    <option value="standar yang jernih">Standar yang Jernih</option>
                                    <option value="hd yang tajam">HD yang Tajam</option>
                                    <option value="4k yang ultra tajam">4K yang Ultra Tajam</option>
                                    <option value="8k yang spektakuler">8K yang Spektakuler</option>
                                </select>
                            </div>

                            <!-- Detail Tambahan -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Detail Tambahan</label>
                                <textarea id="additionalDetails" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" rows="3" placeholder="Tambahkan detail tambahan atau persyaratan spesifik untuk meningkatkan kualitas video..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Audio Mixing -->
                    <div class="md:col-span-2 bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-medium text-gray-700">Pengaturan Audio Mixing</h3>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" id="showAudioMixing" class="form-checkbox h-5 w-5 text-primary rounded border-gray-300 focus:ring-primary">
                                <span class="text-sm text-gray-600">Tampilkan Pengaturan</span>
                            </label>
                        </div>
                        <div id="audioMixingContent" class="hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Dialog Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Volume Dialog</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="dialogVolume" min="0" max="100" value="80" class="w-full">
                                        <span id="dialogVolumeValue" class="text-sm text-gray-600">80%</span>
                                    </div>
                                </div>

                                <!-- Music Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Volume Musik</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="musicVolume" min="0" max="100" value="60" class="w-full">
                                        <span id="musicVolumeValue" class="text-sm text-gray-600">60%</span>
                                    </div>
                                </div>

                                <!-- Effects Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Volume Efek Suara</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="effectsVolume" min="0" max="100" value="40" class="w-full">
                                        <span id="effectsVolumeValue" class="text-sm text-gray-600">40%</span>
                                    </div>
                                </div>

                                <!-- Overall Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Volume Keseluruhan</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="overallVolume" min="0" max="100" value="100" class="w-full">
                                        <span id="overallVolumeValue" class="text-sm text-gray-600">100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Audio Processing -->
                    <div class="md:col-span-2 bg-gray-50 p-4 rounded-lg">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-medium text-gray-700">Pengolahan Audio</h3>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" id="showAudioProcessing" class="form-checkbox h-5 w-5 text-primary rounded border-gray-300 focus:ring-primary">
                                <span class="text-sm text-gray-600">Tampilkan Pengaturan</span>
                            </label>
                        </div>
                        <div id="audioProcessingContent" class="hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Equalizer -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Equalizer</label>
                                    <select id="equalizer" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                        <option value="none">Tanpa Equalizer</option>
                                        <option value="vocal boost">Vocal Boost</option>
                                        <option value="bass boost">Bass Boost</option>
                                        <option value="treble boost">Treble Boost</option>
                                        <option value="flat">Flat</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>

                                <!-- Compression -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kompresi</label>
                                    <select id="compression" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                        <option value="none">Tanpa Kompresi</option>
                                        <option value="light">Ringan</option>
                                        <option value="medium">Sedang</option>
                                        <option value="heavy">Berat</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>

                                <!-- Reverb -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Reverb</label>
                                    <select id="reverb" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                        <option value="none">Tanpa Reverb</option>
                                        <option value="room">Room</option>
                                        <option value="hall">Hall</option>
                                        <option value="cathedral">Cathedral</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>

                                <!-- Spatial Audio -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Spatial Audio</label>
                                    <select id="spatialAudio" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field">
                                        <option value="none">Tanpa Spatial Audio</option>
                                        <option value="stereo">Stereo</option>
                                        <option value="surround">Surround</option>
                                        <option value="3d">3D Audio</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-200">
                        Buat Prompt
                    </button>
                </form>
            </div>

            <!-- Output Section -->
            <div class="w-full lg:w-[500px] card rounded-xl p-8 lg:sticky lg:top-8">
                <h2 class="text-xl font-semibold text-dark mb-4 section-title">Prompt yang Dihasilkan</h2>
                <div id="generatedPrompt" class="bg-light/50 p-6 rounded-lg border border-gray-200 min-h-[calc(100vh-200px)] overflow-y-auto">
                    <p class="text-gray-500">Prompt yang Anda hasilkan akan muncul di sini...</p>
                </div>
                <button id="copyButton" class="mt-4 w-full btn-secondary text-dark py-3 px-4 rounded-lg hidden">
                    Salin ke Clipboard
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import PromptHandler from './promptHandler.js';

        // Initialize PromptHandler
        const promptHandler = new PromptHandler();
        promptHandler.initializeCopyButton();

        // Function to get element value
        function getElementValue(id, defaultValue = '') {
            const element = document.getElementById(id);
            return element ? element.value : defaultValue;
        }

        // Function to get custom input value
        function getCustomInputValue(selector, defaultValue = '') {
            const element = document.querySelector(selector);
            return element ? element.value : defaultValue;
        }

        // Function to update volume display
        function updateVolumeDisplay(inputId, displayId) {
            const input = document.getElementById(inputId);
            const display = document.getElementById(displayId);
            if (input && display) {
                display.textContent = input.value + '%';
            }
        }

        // Function to generate prompt
        async function generatePrompt() {
            try {
                // Get all required values with fallbacks
                const subject = getElementValue('subject', '');
                const subjectCharacteristics = getElementValue('subjectCharacteristics', 'karakteristik subjek');
                const mainAction = getElementValue('mainAction', 'melakukan aksi');
                const emotion = getElementValue('emotion', 'dengan emosi');
                const location = getElementValue('location', '');
                const time = getElementValue('time', 'pada waktu');
                const weather = getElementValue('weather', 'dengan cuaca');
                const season = getElementValue('season', 'pada musim');
                const style = getElementValue('style', 'dengan gaya');
                const cameraMovement = getElementValue('cameraMovement', 'dengan pergerakan kamera');
                const cameraAngle = getElementValue('cameraAngle', 'dari sudut');
                const focalLength = getElementValue('focalLength', 'dengan lensa');
                const lighting = getElementValue('lighting', 'dengan pencahayaan');
                const colorGrading = getElementValue('colorGrading', 'dengan gradiasi warna');
                const backgroundMusic = getElementValue('backgroundMusic', 'none');
                const musicMood = getElementValue('musicMood', 'none');
                const soundEffects = getElementValue('soundEffects', 'none');
                const volume = getElementValue('volume', 'sedang yang seimbang');
                const videoQuality = getElementValue('videoQuality', 'standar yang jernih');
                const dialog = getElementValue('dialog', 'none');
                const dialogCharacter = getElementValue('dialogCharacter', 'none');
                const voiceMood = getElementValue('voiceMood', 'none');
                const additionalDetails = getElementValue('additionalDetails', '');

                // Get all dialog inputs with their characters
                const dialogInputs = Array.from(document.querySelectorAll('#dialogInputs .flex')).map(div => {
                    const character = div.querySelector('.dialog-character').value;
                    const text = div.querySelector('input').value.trim();
                    return text ? `"${text}"` : null;
                }).filter(Boolean);

                // Get custom inputs
                const customDialog = getCustomInputValue('#customDialogInput input');
                const customDialogCharacter = getCustomInputValue('#customDialogCharacterInput input');
                const customVoiceMood = getCustomInputValue('#customVoiceMoodInput input');
                const customMusic = getCustomInputValue('#customMusicInput input');
                const customVolume = getCustomInputValue('#customVolumeInput input');
                const customSoundEffects = Array.from(document.querySelectorAll('#soundEffectsInputs input'))
                    .map(input => input.value.trim())
                    .filter(value => value !== '');

                // Get audio processing values
                const dialogVolume = getElementValue('dialogVolume', '80');
                const musicVolume = getElementValue('musicVolume', '60');
                const effectsVolume = getElementValue('effectsVolume', '40');
                const overallVolume = getElementValue('overallVolume', '100');
                const equalizer = getElementValue('equalizer', 'none');
                const compression = getElementValue('compression', 'none');
                const reverb = getElementValue('reverb', 'none');
                const spatialAudio = getElementValue('spatialAudio', 'none');
                const audioTranslation = getElementValue('audioTranslation', 'none');

                let audioDescription = [];
                
                // Add dialog if present
                if (dialog !== 'none') {
                    let dialogText = '';
                    if (dialog === 'custom' && customDialog) {
                        dialogText = customDialog;
                    } else {
                        dialogText = dialog;
                    }

                    if (dialogCharacter !== 'none') {
                        dialogText += ` ${dialogCharacter === 'custom' && customDialogCharacter ? customDialogCharacter : dialogCharacter}`;
                    }

                    if (voiceMood !== 'none') {
                        dialogText += ` dengan suasana ${voiceMood === 'custom' && customVoiceMood ? customVoiceMood : voiceMood}`;
                    }

                    if (dialogInputs.length > 0) {
                        dialogText += `: [${dialogInputs.join(', ')}]`;
                    }

                    if (document.getElementById('showAudioMixing')?.checked) {
                        dialogText += ` (${dialogVolume}%)`;
                    }

                    // Add translation note if needed
                    if (audioTranslation === 'english') {
                        dialogText += ' (Keep original dialog)';
                    } else if (audioTranslation === 'full_english') {
                        dialogText += ' (Translate to English)';
                    }

                    audioDescription.push(dialogText);
                }
                
                // Add music if present
                if (backgroundMusic !== 'none') {
                    let musicText = 'Musik ';
                    if (backgroundMusic === 'custom' && customMusic) {
                        musicText += customMusic;
                    } else {
                        musicText += backgroundMusic;
                    }
                    if (musicMood !== 'none') {
                        musicText += ` dengan suasana ${musicMood === 'custom' && customMusicMood ? customMusicMood : musicMood}`;
                    }
                    if (document.getElementById('showAudioMixing')?.checked) {
                        musicText += ` (${musicVolume}%)`;
                    }
                    audioDescription.push(musicText);
                }
                
                // Add sound effects if present
                if (soundEffects !== 'none') {
                    let effectsText = '';
                    if (soundEffects === 'custom' && customSoundEffects.length > 0) {
                        effectsText = `efek suara: [${customSoundEffects.join(', ')}]`;
                    } else {
                        effectsText = `efek suara ${soundEffects}`;
                    }
                    if (document.getElementById('showAudioMixing')?.checked) {
                        effectsText += ` (${effectsVolume}%)`;
                    }
                    audioDescription.push(effectsText);
                }

                // Add audio processing details only if section is visible
                if (document.getElementById('showAudioProcessing')?.checked) {
                    let processingDetails = [];
                    if (equalizer !== 'none') {
                        processingDetails.push(`Equalizer: ${equalizer}`);
                    }
                    if (compression !== 'none') {
                        processingDetails.push(`Kompresi: ${compression}`);
                    }
                    if (reverb !== 'none') {
                        processingDetails.push(`Reverb: ${reverb}`);
                    }
                    if (spatialAudio !== 'none') {
                        processingDetails.push(`Spatial Audio: ${spatialAudio}`);
                    }

                    if (processingDetails.length > 0) {
                        audioDescription.push(`Pengolahan Audio: ${processingDetails.join(', ')}`);
                    }
                }

                // Combine all audio elements
                const volumeText = volume === 'custom' && customVolume ? customVolume : volume;
                let audioText = audioDescription.length > 0 
                    ? `Audio: ${audioDescription.join(', ')}${document.getElementById('showAudioMixing')?.checked ? ` (Master: ${overallVolume}%)` : ''}`
                    : 'Tanpa audio';

                // Build the prompt with all inputs
                let prompt = '';
                
                // Add subject and characteristics
                if (subject && subject.trim() !== '') {
                    prompt += `Buat video bergaya ${style} tentang ${subject}`;
                } else {
                    prompt += `Buat video bergaya ${style} tentang ${subjectCharacteristics}`;
                }

                // Add action and emotion
                prompt += ` yang sedang ${mainAction} dengan emosi ${emotion}`;

                // Add location and time
                if (location && location.trim() !== '') {
                    prompt += ` di ${location}`;
                }
                prompt += ` pada ${time} ${season} dengan cuaca ${weather}. \n\n`;

                // Add camera details
                prompt += `Gunakan pergerakan kamera ${cameraMovement} dari sudut ${cameraAngle} dengan lensa ${focalLength}. `;
                prompt += `Berikan pencahayaan ${lighting} dan gradiasi warna ${colorGrading}. \n\n`;

                // Add audio details
                prompt += `${audioText}. \n\n`;

                // Add technical specifications
                prompt += `Spesifikasi teknis: Kualitas ${videoQuality}.`;

                // Add additional details if present
                if (additionalDetails) {
                    prompt += ` \n\n${additionalDetails}`;
                }

                const generatedPromptDiv = document.getElementById('generatedPrompt');
                const copyButton = document.getElementById('copyButton');
                
                if (!generatedPromptDiv) {
                    throw new Error('Elemen output prompt tidak ditemukan');
                }

                // Show loading state
                generatedPromptDiv.innerHTML = `
                    <div class="flex items-center justify-center p-4">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
                        <span class="ml-2 text-gray-600">Menerjemahkan prompt...</span>
                    </div>
                `;

                // Extract dialogs and sound effects before translation
                const dialogRegex = /\[([^\]]+)\]/g;
                const dialogs = [];
                let match;
                while ((match = dialogRegex.exec(prompt)) !== null) {
                    dialogs.push({
                        original: match[0],
                        text: match[1],
                        context: prompt.substring(0, match.index).split('Audio:')[1]?.trim() || ''
                    });
                }

                // Replace dialogs with placeholders
                let promptForTranslation = prompt;
                dialogs.forEach((dialog, index) => {
                    promptForTranslation = promptForTranslation.replace(dialog.original, `[DIALOG_${index}]`);
                });

                // Translate the prompt using PromptHandler
                const translatedPrompt = await promptHandler.translateText(promptForTranslation);

                // Restore dialogs in translated prompt
                let finalTranslatedPrompt = translatedPrompt;
                dialogs.forEach((dialog, index) => {
                    // Keep the original Indonesian dialog text and its context
                    const dialogWithContext = dialog.context ? `${dialog.context}: ${dialog.original}` : dialog.original;
                    // Replace the placeholder with the full dialog including context
                    finalTranslatedPrompt = finalTranslatedPrompt.replace(`[DIALOG_${index}]`, dialogWithContext);
                });

                // Ensure audio section is properly formatted
                if (finalTranslatedPrompt.includes('Audio:')) {
                    const audioParts = finalTranslatedPrompt.split('Audio:');
                    if (audioParts.length > 1) {
                        const audioContent = audioParts[1].trim();
                        if (!audioContent.includes('[')) {
                            // If audio content doesn't have dialog, add it back
                            const originalAudio = prompt.split('Audio:')[1]?.trim() || '';
                            finalTranslatedPrompt = finalTranslatedPrompt.replace(
                                `Audio: ${audioContent}`,
                                `Audio: ${originalAudio}`
                            );
                        }
                    }
                }

                // Create output HTML with better formatting
                const outputHTML = `
                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-sm font-medium text-blue-800">Prompt dalam Bahasa Indonesia:</h3>
                                <button type="button" class="copy-btn text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1 px-3 py-1 rounded border border-blue-200 hover:border-blue-400 transition-colors" data-text="${prompt.replace(/"/g, '&quot;').replace(/\n/g, '\\n')}">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path>
                                    </svg>
                                    <span>Salin</span>
                                </button>
                            </div>
                            <p class="text-gray-800 whitespace-pre-line">${prompt}</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-sm font-medium text-green-800">Prompt dalam Bahasa Inggris:</h3>
                                <button type="button" class="copy-btn text-green-600 hover:text-green-800 text-sm flex items-center gap-1 px-3 py-1 rounded border border-green-200 hover:border-green-400 transition-colors" data-text="${finalTranslatedPrompt.replace(/"/g, '&quot;').replace(/\n/g, '\\n')}">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path>
                                    </svg>
                                    <span>Copy</span>
                                </button>
                            </div>
                            <p class="text-gray-800 whitespace-pre-line">${finalTranslatedPrompt}</p>
                        </div>
                    </div>
                `;

                generatedPromptDiv.innerHTML = outputHTML;
                
                // Add click event listeners to copy buttons
                document.querySelectorAll('.copy-btn').forEach(button => {
                    button.addEventListener('click', async function() {
                        const text = this.getAttribute('data-text');
                        try {
                            await navigator.clipboard.writeText(text);
                            
                            // Update button text to show success
                            const span = this.querySelector('span');
                            if (span) {
                                const originalText = span.textContent;
                                span.textContent = originalText === 'Salin' ? ' Tersalin!' : ' Copied!';
                                this.classList.add('text-green-600');
                                this.classList.add('border-green-400');
                                
                                // Reset button after 2 seconds
                                setTimeout(() => {
                                    span.textContent = originalText;
                                    this.classList.remove('text-green-600');
                                    this.classList.remove('border-green-400');
                                }, 2000);
                            }
                        } catch (err) {
                            console.error('Failed to copy text: ', err);
                            
                            // Show error state
                            const span = this.querySelector('span');
                            if (span) {
                                const originalText = span.textContent;
                                span.textContent = ' Gagal';
                                this.classList.add('text-red-600');
                                this.classList.add('border-red-400');
                                
                                // Reset button after 2 seconds
                                setTimeout(() => {
                                    span.textContent = originalText;
                                    this.classList.remove('text-red-600');
                                    this.classList.remove('border-red-400');
                                }, 2000);
                            }
                        }
                    });
                });

                // Remove the old copy button
                const oldCopyButton = document.getElementById('copyButton');
                if (oldCopyButton) {
                    oldCopyButton.remove();
                }

                // Scroll to generated prompt only on mobile
                if (window.innerWidth < 1024) {
                    generatedPromptDiv.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }
            } catch (error) {
                console.error('Error generating prompt:', error);
                const generatedPromptDiv = document.getElementById('generatedPrompt');
                if (generatedPromptDiv) {
                    generatedPromptDiv.innerHTML = `
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h3 class="text-sm font-medium text-red-800 mb-2">Error:</h3>
                            <p class="text-gray-800">${error.message}</p>
                        </div>
                    `;
                }
            }
        }

        // Function to add event listeners
        function addInputListeners() {
            // Get all form elements
            const formElements = document.querySelectorAll('#promptForm input, #promptForm select, #promptForm textarea');
            
            // Add event listeners to each element
            formElements.forEach(element => {
                if (element.type === 'range') {
                    element.addEventListener('input', function() {
                        updateVolumeDisplay(this.id, this.id + 'Value');
                        generatePrompt();
                    });
                } else {
                    // Add both input and change events for better responsiveness
                    element.addEventListener('input', generatePrompt);
                    element.addEventListener('change', generatePrompt);
                    element.addEventListener('keyup', generatePrompt);
                }
            });

            // Add event listeners for custom inputs
            const customInputs = {
                'dialog': 'customDialogInput',
                'dialogCharacter': 'customDialogCharacterInput',
                'voiceMood': 'customVoiceMoodInput',
                'backgroundMusic': 'customMusicInput',
                'soundEffects': 'customSoundEffectsInput',
                'volume': 'customVolumeInput'
            };

            Object.entries(customInputs).forEach(([selectId, inputId]) => {
                const select = document.getElementById(selectId);
                const input = document.getElementById(inputId);
                if (select && input) {
                    select.addEventListener('change', function() {
                        input.classList.toggle('hidden', this.value !== 'custom');
                        generatePrompt();
                    });
                    // Add event listeners to custom input fields
                    input.addEventListener('input', generatePrompt);
                    input.addEventListener('change', generatePrompt);
                    input.addEventListener('keyup', generatePrompt);
                }
            });

            // Add event listeners for dynamic inputs
            const dialogInputs = document.getElementById('dialogInputs');
            if (dialogInputs) {
                dialogInputs.addEventListener('input', function(e) {
                    if (e.target.tagName === 'INPUT') {
                        generatePrompt();
                    }
                });
            }

            const soundEffectsInputs = document.getElementById('soundEffectsInputs');
            if (soundEffectsInputs) {
                soundEffectsInputs.addEventListener('input', function(e) {
                    if (e.target.tagName === 'INPUT') {
                        generatePrompt();
                    }
                });
            }

            // Add event listener for form submission
            const promptForm = document.getElementById('promptForm');
            if (promptForm) {
                promptForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    generatePrompt();
                });
            }

            // Add event listeners for audio mixing and processing toggles
            const showAudioMixing = document.getElementById('showAudioMixing');
            if (showAudioMixing) {
                showAudioMixing.addEventListener('change', function() {
                    const audioMixingContent = document.getElementById('audioMixingContent');
                    if (audioMixingContent) {
                        audioMixingContent.classList.toggle('hidden', !this.checked);
                    }
                    generatePrompt();
                });
            }

            const showAudioProcessing = document.getElementById('showAudioProcessing');
            if (showAudioProcessing) {
                showAudioProcessing.addEventListener('change', function() {
                    const audioProcessingContent = document.getElementById('audioProcessingContent');
                    if (audioProcessingContent) {
                        audioProcessingContent.classList.toggle('hidden', !this.checked);
                    }
                    generatePrompt();
                });
            }
        }

        // Function to add new dialog input
        window.addDialogInput = function() {
            const dialogInputs = document.getElementById('dialogInputs');
            if (dialogInputs) {
                const newDialog = document.createElement('div');
                newDialog.className = 'flex gap-4 items-start';
                newDialog.innerHTML = `
                    <div class="w-1/4">
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field dialog-character">
                            ${Array.from(document.querySelectorAll('.dialog-character option')).map(opt => opt.outerHTML).join('')}
                        </select>
                    </div>
                    <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary input-field" placeholder="Masukkan dialog...">
                    <button type="button" class="text-red-500 hover:text-red-700" onclick="removeDialog(this)">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;
                dialogInputs.appendChild(newDialog);
                
                // Add event listeners to new elements
                const newInput = newDialog.querySelector('input[type="text"]');
                const newSelect = newDialog.querySelector('select');
                
                if (newInput) {
                    newInput.addEventListener('input', generatePrompt);
                    newInput.addEventListener('change', generatePrompt);
                    newInput.addEventListener('keyup', generatePrompt);
                }
                if (newSelect) {
                    newSelect.addEventListener('change', function() {
                        if (this.value === 'custom') {
                            const customName = prompt('Masukkan nama karakter:');
                            if (customName) {
                                const option = document.createElement('option');
                                option.value = customName;
                                option.text = customName;
                                this.appendChild(option);
                                this.value = customName;
                            } else {
                                this.value = 'Karakter 1';
                            }
                        }
                        generatePrompt();
                    });
                }
                
                generatePrompt();
            }
        }

        // Function to add new dialog character
        window.addDialogCharacter = function() {
            const customName = prompt('Masukkan nama karakter baru:');
            if (customName) {
                const characterOptions = document.querySelectorAll('.dialog-character');
                characterOptions.forEach(select => {
                    const option = document.createElement('option');
                    option.value = customName;
                    option.text = customName;
                    select.appendChild(option);
                });
                generatePrompt();
            }
        }

        // Function to remove dialog input
        window.removeDialog = function(button) {
            const dialogInputs = document.getElementById('dialogInputs');
            if (dialogInputs && dialogInputs.children.length > 1) {
                button.parentElement.remove();
                generatePrompt();
            }
        }

        // Function to remove sound effect input
        window.removeSoundEffect = function(button) {
            const soundEffectsInputs = document.getElementById('soundEffectsInputs');
            if (soundEffectsInputs && soundEffectsInputs.children.length > 1) {
                button.parentElement.remove();
                generatePrompt();
            }
        }

        // Initialize when the page loads
        document.addEventListener('DOMContentLoaded', async function() {
            // Add all event listeners
            addInputListeners();
            
            // Set initial volume displays
            updateVolumeDisplay('dialogVolume', 'dialogVolumeValue');
            updateVolumeDisplay('musicVolume', 'musicVolumeValue');
            updateVolumeDisplay('effectsVolume', 'effectsVolumeValue');
            updateVolumeDisplay('overallVolume', 'overallVolumeValue');
            
            // Initialize dropdown translations
            await promptHandler.initializeDropdownTranslations();
            
            // Generate initial prompt
            generatePrompt();
            
            // Setup character search functionality
            setupCharacterSearch();
        });

        // Add animation to form sections
        document.querySelectorAll('.bg-light\\/50').forEach((section, index) => {
            section.style.animationDelay = `${index * 0.1}s`;
            section.classList.add('animate-fade-in');
        });

        // Add resize handler for responsive behavior
        window.addEventListener('resize', function() {
            const outputSection = document.querySelector('.lg\\:sticky');
            if (outputSection) {
                if (window.innerWidth < 1024) {
                    outputSection.style.position = 'relative';
                } else {
                    outputSection.style.position = 'sticky';
                }
            }
        });

        // Add this to your existing JavaScript
        function setupCharacterSearch() {
            const searchInputs = document.querySelectorAll('.character-search');
            searchInputs.forEach(input => {
                input.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const select = this.nextElementSibling;
                    const options = select.querySelectorAll('option');
                    
                    options.forEach(option => {
                        const text = option.text.toLowerCase();
                        if (text.includes(searchTerm) || option.value === 'custom') {
                            option.style.display = '';
                        } else {
                            option.style.display = 'none';
                        }
                    });
                });
            });
        }
    </script>
</body>
</html> e="text"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-size: 14px;
      transition: var(--transition);
    }
    
    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.2);
    }
    
    input[type="color"] {
      width: 40px;
      height: 40px;
      padding: 2px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      cursor: pointer;
    }
    
    input[type="checkbox"] {
      margin-right: 8px;
      transform: scale(1.1);
    }
    
    /* Buttons */
    .btn {
      display: inline-block;
      padding: 10px 20px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
      transition: var(--transition);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .btn:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    
    .btn-secondary {
      background-color: #6c757d;
    }
    
    .btn-secondary:hover {
      background-color: #5a6268;
    }
    
    .btn-success {
      background-color: var(--success-color);
    }
    
    .btn-success:hover {
      background-color: #3d8b40;
    }
    
    .btn-danger {
      background-color: var(--danger-color);
    }
    
    .btn-danger:hover {
      background-color: #d32f2f;
    }
    
    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    /* Cards */
    .card {
      background: white;
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
    }
    
    /* Text editor */
    .text-editor {
      position: relative;
    }
    
    #inputText {
      width: 100%;
      min-height: 300px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-size: 15px;
      line-height: 1.6;
      resize: vertical;
    }
    
    .editor-toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    /* File upload */
    .file-upload {
      border: 2px dashed #ccc;
      border-radius: var(--border-radius);
      padding: 30px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      margin-bottom: 15px;
    }
    
    .file-upload:hover {
      border-color: var(--primary-color);
      background-color: rgba(67, 97, 238, 0.05);
    }
    
    .file-upload i {
      font-size: 40px;
      color: var(--primary-color);
      margin-bottom: 10px;
    }
    
    .file-upload p {
      margin-bottom: 5px;
    }
    
    .file-upload small {
      color: #6c757d;
    }
    
    /* Preview */
    .preview-container {
      position: relative;
    }
    
    #preview {
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      background: white;
      min-height: 400px;
      padding: 20px;
      overflow-y: auto;
      box-shadow: var(--box-shadow);
    }
    
    .page {
      position: relative;
      padding: 40px;
      margin-bottom: 30px;
      border-radius: var(--border-radius);
      background: white;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      min-height: 800px;
      max-width: 600px;
      margin: 0 auto;
      overflow: visible;
      break-after: page;
    }
    
    .page-cover {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      height: 100%;
    }
    
    .page-cover img {
      max-width: 80%;
      max-height: 400px;
      margin-bottom: 30px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .content {
      white-space: pre-wrap;
      line-height: 1.8;
      margin: 0 0 60px;
      text-align: justify;
      hyphens: auto;
    }
    
    .footer {
      position: absolute;
      bottom: 40px;
      left: 40px;
      right: 40px;
      font-size: 12px;
      color: #666;
      display: flex;
      justify-content: space-between;
      padding: 10px;
      border-top: 1px solid #eee;
      background-color: white;
      z-index: 10;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: var(--transition);
    }
    
    .tab.active {
      border-bottom-color: var(--primary-color);
      color: var(--primary-color);
      font-weight: 500;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Responsive */
    @media (max-width: 992px) {
      .container {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        position: static;
      }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #aaa;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #888;
    }
    
    /* Loading spinner */
    .spinner {
      display: none;
      width: 40px;
      height: 40px;
      margin: 20px auto;
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      background-color: var(--success-color);
      color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      z-index: 1000;
      transform: translateX(200%);
      transition: transform 0.3s ease;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.error {
      background-color: var(--danger-color);
    }
    
    .notification.warning {
      background-color: var(--warning-color);
    }
    
    /* File upload dropdown */
    .file-upload-container {
      position: relative;
      margin-bottom: 15px;
    }
    
    .file-type-dropdown {
      position: absolute;
      top: 0;
      right: 0;
      z-index: 10;
    }
    
    .dropdown-btn {
      padding: 8px 12px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 14px;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: white;
      min-width: 160px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      border-radius: var(--border-radius);
      z-index: 11;
    }
    
    .dropdown-content a {
      color: var(--dark-color);
      padding: 8px 12px;
      text-decoration: none;
      display: block;
      font-size: 14px;
    }
    
    .dropdown-content a:hover {
      background-color: #f1f1f1;
    }
    
    .show-dropdown {
      display: block;
    }
    
    .cover-upload-btn {
      display: block;
      width: 100%;
      padding: 10px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      text-align: center;
      margin-top: 10px;
    }
    .page-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    
    .page-content {
      padding-bottom: 80px; /* Make space for footer */
    }
    
    .footer {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 40px;
      font-size: 12px;
      color: #666;
      border-top: 1px solid #eee;
      background-color: white;
      z-index: 10;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Ebook Creator Pro</h1>
      <div class="btn-group">
        <button id="generateBtn" class="btn btn-success">Generate Ebook</button>
        <button id="exportBtn" class="btn btn-secondary">Export</button>
      </div>
    </div>
  </header>
  
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <h3>Import Content</h3>
        <div class="file-upload-container">
          <div class="file-upload" id="dropZone">
            <i></i>
            <p>Drag & drop file here</p>
            <small>or click to browse files</small>
          </div>
          <div class="file-type-dropdown">
            <button class="dropdown-btn" onclick="toggleDropdown()">TXT </button>
            <div class="dropdown-content" id="fileTypeDropdown">
              <a href="#" onclick="setFileType('txt')">TXT File</a>
              <a href="#" onclick="setFileType('docx')">Word Document</a>
            </div>
          </div>
        </div>
        <input type="file" id="txtFile" accept=".txt" style="display:none">
        <input type="file" id="wordFile" accept=".docx,.doc" style="display:none">
      </div>
      
      <div class="sidebar-section">
        <h3>Book Metadata</h3>
        <div class="form-group">
          <label for="bookTitle">Title</label>
          <input type="text" id="bookTitle" placeholder="Book Title">
        </div>
        <div class="form-group">
          <label for="authorName">Author</label>
          <input type="text" id="authorName" placeholder="Author Name">
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="includeMeta" checked>
            Include in ebook
          </label>
        </div>
      </div>
      
      <div class="sidebar-section">
        <h3>Cover Image</h3>
        <div id="coverDropZone" class="file-upload">
          <i></i>
          <p>Click to upload cover image</p>
          <small>JPG, PNG (max 5MB)</small>
        </div>
        <button class="cover-upload-btn" onclick="document.getElementById('imgInput').click()">
          Select Cover Image
        </button>
        <input type="file" id="imgInput" accept="image/*" style="display:none">
        <div id="coverPreview" style="margin-top: 15px;"></div>
      </div>
      
      <div class="sidebar-section">
        <h3>Page Settings</h3>
        <div class="form-group">
          <label for="pageWidth">Width (px)</label>
          <input type="number" id="pageWidth" value="600" min="300" max="1200">
        </div>
        <div class="form-group">
          <label for="pageHeight">Height (px)</label>
          <input type="number" id="pageHeight" value="800" min="400" max="2000">
        </div>
        <div class="form-group">
          <label for="wordCount">Words per page</label>
          <input type="number" id="wordCount" value="500" min="100" max="2000">
        </div>
      </div>
      
      <div class="sidebar-section">
        <h3>Typography</h3>
        <div class="form-group">
          <label for="fontFamily">Font Family</label>
          <select id="fontFamily">
            <option value="'Roboto', sans-serif">Roboto (Sans-serif)</option>
            <option value="'Merriweather', serif">Merriweather (Serif)</option>
            <option value="'Source Code Pro', monospace">Source Code Pro (Monospace)</option>
            <option value="Arial, sans-serif">Arial</option>
            <option value="'Times New Roman', serif">Times New Roman</option>
            <option value="Georgia, serif">Georgia</option>
          </select>
        </div>
        <div class="form-group">
          <label for="fontSize">Font Size (px)</label>
          <input type="number" id="fontSize" value="14" min="8" max="36">
        </div>
        <div class="form-group">
          <label for="lineHeight">Line Height</label>
          <input type="number" id="lineHeight" value="1.6" min="1" max="3" step="0.1">
        </div>
        <div class="form-group">
          <label for="txtColor">Text Color</label>
          <input type="color" id="txtColor" value="#333333">
        </div>
      </div>
      
      <div class="sidebar-section">
        <h3>Margins & Spacing</h3>
        <div class="form-group">
          <label for="marginTop">Top (px)</label>
          <input type="number" id="marginTop" value="40" min="0" max="200">
        </div>
        <div class="form-group">
          <label for="marginBottom">Bottom (px)</label>
          <input type="number" id="marginBottom" value="60" min="0" max="200">
        </div>
        <div class="form-group">
          <label for="marginLeft">Left (px)</label>
          <input type="number" id="marginLeft" value="40" min="0" max="200">
        </div>
        <div class="form-group">
          <label for="marginRight">Right (px)</label>
          <input type="number" id="marginRight" value="40" min="0" max="200">
        </div>
      </div>
      
      <div class="sidebar-section">
        <h3>Export Options</h3>
        <div class="form-group">
          <label>
            <input type="checkbox" id="exportPDF" checked>
            Export as PDF
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="exportPNG">
            Export as PNG
          </label>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="useWatermark">
            Add Watermark
          </label>
        </div>
        <div class="form-group">
          <label for="watermarkText">Watermark Text</label>
          <input type="text" id="watermarkText" value="Sample Watermark">
        </div>
        <div class="form-group">
          <label for="fileNamePattern">File Name Pattern</label>
          <input type="text" id="fileNamePattern" value="{title}" placeholder="e.g. {title}">
          <small>Available variables: {title}, {author}, {date}</small>
        </div>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
      <div class="card">
        <div class="tabs">
          <div class="tab active" data-tab="editor">Editor</div>
          <div class="tab" data-tab="preview">Preview</div>
        </div>
        
        <div class="tab-content active" id="editor">
          <div class="editor-toolbar">
            <button class="btn" onclick="cleanText()">Clean Text</button>
            <button class="btn" onclick="removeSymbols()">Remove Symbols</button>
            <button class="btn" onclick="formatParagraphs()">Format Paragraphs</button>
          </div>
          <textarea id="inputText" placeholder="Paste your text here or upload a file..."></textarea>
        </div>
        
        <div class="tab-content" id="preview">
          <div id="preview"></div>
          <div class="spinner" id="previewSpinner"></div>
        </div>
      </div>
      
      <div class="card">
        <h3>Export Settings</h3>
        <div class="btn-group">
          <button class="btn btn-success" onclick="generateEbook()">Generate Preview</button>
          <button class="btn btn-secondary" onclick="exportEbook()">Export Ebook</button>
        </div>
      </div>
    </main>
  </div>
  
  <div class="notification" id="notification"></div>

  <script>
    // Global variables
let originalText = "";
let currentText = "";
let coverImageSrc = "";
let pages = [];
let currentFileType = 'txt';

// DOM elements
const dropZone = document.getElementById("dropZone");
const coverDropZone = document.getElementById("coverDropZone");
const txtFileInput = document.getElementById("txtFile");
const wordFileInput = document.getElementById("wordFile");
const imgInput = document.getElementById("imgInput");
const previewSpinner = document.getElementById("previewSpinner");
const notification = document.getElementById("notification");

// Initialize the application
document.addEventListener("DOMContentLoaded", function() {
  setupEventListeners();
  setupTabs();
});

function setupEventListeners() {
  // Text file upload
  dropZone.addEventListener("click", () => {
    if (currentFileType === 'txt') {
      txtFileInput.click();
    } else {
      wordFileInput.click();
    }
  });
  
  txtFileInput.addEventListener("change", handleFileUpload);
  wordFileInput.addEventListener("change", handleFileUpload);
  
  // Cover image upload
  coverDropZone.addEventListener("click", () => imgInput.click());
  imgInput.addEventListener("change", handleCoverUpload);
  
  // Drag and drop handlers
  setupDragAndDrop();
}

function setupDragAndDrop() {
  // Text files
  dropZone.addEventListener("dragover", (e) => {
    e.preventDefault();
    dropZone.style.borderColor = "#4361ee";
    dropZone.style.backgroundColor = "rgba(67, 97, 238, 0.05)";
  });
  
  dropZone.addEventListener("dragleave", () => {
    dropZone.style.borderColor = "#ccc";
    dropZone.style.backgroundColor = "transparent";
  });
  
  dropZone.addEventListener("drop", (e) => {
    e.preventDefault();
    dropZone.style.borderColor = "#ccc";
    dropZone.style.backgroundColor = "transparent";
    
    const file = e.dataTransfer.files[0];
    if (!file) return;
    
    if (currentFileType === 'txt' && file.type === "text/plain") {
      txtFileInput.files = e.dataTransfer.files;
      handleFileUpload({ target: txtFileInput });
    } 
    else if (currentFileType === 'docx' && 
            (file.name.endsWith('.docx') || file.name.endsWith('.doc'))) {
      wordFileInput.files = e.dataTransfer.files;
      handleFileUpload({ target: wordFileInput });
    }
    else {
      showNotification(`Please upload a valid ${currentFileType === 'txt' ? '.txt' : 'Word'} file`, "error");
    }
  });
  
  // Cover images
  coverDropZone.addEventListener("dragover", (e) => {
    e.preventDefault();
    coverDropZone.style.borderColor = "#4361ee";
    coverDropZone.style.backgroundColor = "rgba(67, 97, 238, 0.05)";
  });
  
  coverDropZone.addEventListener("dragleave", () => {
    coverDropZone.style.borderColor = "#ccc";
    coverDropZone.style.backgroundColor = "transparent";
  });
  
  coverDropZone.addEventListener("drop", (e) => {
    e.preventDefault();
    coverDropZone.style.borderColor = "#ccc";
    coverDropZone.style.backgroundColor = "transparent";
    
    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith("image/")) {
      imgInput.files = e.dataTransfer.files;
      handleCoverUpload({ target: imgInput });
    } else {
      showNotification("Please upload a valid image file", "error");
    }
  });
}

function setupTabs() {
  const tabs = document.querySelectorAll(".tab");
  tabs.forEach(tab => {
    tab.addEventListener("click", function() {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
      
      this.classList.add("active");
      const tabId = this.getAttribute("data-tab");
      document.getElementById(tabId).classList.add("active");
    });
  });
}

function toggleDropdown() {
  document.getElementById("fileTypeDropdown").classList.toggle("show-dropdown");
}

function setFileType(type) {
  currentFileType = type;
  document.querySelector(".dropdown-btn").textContent = 
    type === 'txt' ? 'TXT ' : 'Word ';
  toggleDropdown();
}

function showNotification(message, type = "success") {
  notification.textContent = message;
  notification.className = "notification " + type;
  notification.classList.add("show");
  
  setTimeout(() => {
    notification.classList.remove("show");
  }, 3000);
}

async function handleFileUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  
  if (file.size > 5 * 1024 * 1024) {
    showNotification("File size should be less than 5MB", "error");
    return;
  }
  
  const reader = new FileReader();
  
  if (currentFileType === 'docx') {
    try {
      const arrayBuffer = await readFileAsArrayBuffer(file);
      const result = await mammoth.extractRawText({ arrayBuffer: arrayBuffer });
      
      originalText = result.value;
      document.getElementById("inputText").value = originalText;
      
      if (!document.getElementById("bookTitle").value) {
        const firstLine = originalText.split('\n')[0].trim();
        if (firstLine.length > 0 && firstLine.length < 100) {
          document.getElementById("bookTitle").value = firstLine;
        }
      }
      
      showNotification("Word document processed successfully!");
    } catch (error) {
      showNotification("Error processing Word document: " + error.message, "error");
      console.error(error);
    }
  } else {
    reader.onload = function(e) {
      originalText = e.target.result;
      document.getElementById("inputText").value = originalText;
      
      if (!document.getElementById("bookTitle").value) {
        const firstLine = originalText.split('\n')[0].trim();
        if (firstLine.length > 0 && firstLine.length < 100) {
          document.getElementById("bookTitle").value = firstLine;
        }
      }
      
      showNotification("Text file loaded successfully!");
    };
    reader.readAsText(file);
  }
}

function readFileAsArrayBuffer(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsArrayBuffer(file);
  });
}

function handleCoverUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  
  if (file.size > 5 * 1024 * 1024) {
    showNotification("Image size should be less than 5MB", "error");
    return;
  }
  
  const reader = new FileReader();
  reader.onload = function(e) {
    coverImageSrc = e.target.result;
    const preview = document.getElementById("coverPreview");
    preview.innerHTML = `
      <img src="${coverImageSrc}" alt="Cover Preview" style="max-width:100%; border-radius:4px; box-shadow:0 2px 5px rgba(0,0,0,0.1)">
      <button class="btn btn-danger" style="margin-top:10px; width:100%" onclick="removeCover()">Remove Cover</button>
    `;
    showNotification("Cover image uploaded!");
  };
  reader.readAsDataURL(file);
}

function removeCover() {
  coverImageSrc = "";
  document.getElementById("coverPreview").innerHTML = "";
  imgInput.value = "";
  showNotification("Cover image removed");
}

// Text cleaning functions
function cleanText() {
  const input = document.getElementById("inputText").value;
  if (!input.trim()) {
    showNotification("Please paste or upload some text first", "error");
    return;
  }
  
  let cleaned = input
    .replace(/\r\n/g, '\n')
    .replace(/\n{3,}/g, '\n\n')
    .replace(/[^\S\n]{2,}/g, ' ')
    .trim();
  
  document.getElementById("inputText").value = cleaned;
  showNotification("Text cleaned successfully!");
}

function removeSymbols() {
  const input = document.getElementById("inputText").value;
  if (!input.trim()) {
    showNotification("Please paste or upload some text first", "error");
    return;
  }
  
  const symbolsToRemove = /[`~^*+=|<>{}_]/g;
  
  let cleaned = input.replace(symbolsToRemove, '');
  document.getElementById("inputText").value = cleaned;
  showNotification("Symbols removed successfully!");
}

function formatParagraphs() {
  const input = document.getElementById("inputText").value;
  if (!input.trim()) {
    showNotification("Please paste or upload some text first", "error");
    return;
  }
  
  let formatted = input.split('\n')
    .map(para => para.trim())
    .filter(para => para.length > 0)
    .join('\n\n');
  
  document.getElementById("inputText").value = formatted;
  showNotification("Paragraphs formatted successfully!");
}

// Ebook generation functions
function generateEbook() {
  const input = document.getElementById("inputText").value;
  if (!input.trim()) {
    showNotification("Please paste or upload some text first", "error");
    return;
  }
  
  previewSpinner.style.display = "block";
  document.getElementById("preview").innerHTML = "";
  
  setTimeout(() => {
    try {
      processTextAndGeneratePages(input);
      previewSpinner.style.display = "none";
      showNotification("Ebook generated successfully!");
      document.querySelector('.tab[data-tab="preview"]').click();
    } catch (error) {
      previewSpinner.style.display = "none";
      showNotification("Error generating ebook: " + error.message, "error");
      console.error(error);
    }
  }, 100);
}

function processTextAndGeneratePages(input) {
  currentText = cleanTextForProcessing(input);
  
  const bookTitle = document.getElementById("bookTitle").value || "Untitled";
  const authorName = document.getElementById("authorName").value || "Unknown Author";
  const includeMeta = document.getElementById("includeMeta").checked;
  const wordsPerPage = parseInt(document.getElementById("wordCount").value) || 500;
  const fontFamily = document.getElementById("fontFamily").value;
  const fontSize = document.getElementById("fontSize").value + "px";
  const lineHeight = document.getElementById("lineHeight").value;
  const txtColor = document.getElementById("txtColor").value;
  
  const marginTop = document.getElementById("marginTop").value + "px";
  const marginBottom = document.getElementById("marginBottom").value + "px";
  const marginLeft = document.getElementById("marginLeft").value + "px";
  const marginRight = document.getElementById("marginRight").value + "px";
  
  const pageWidth = document.getElementById("pageWidth").value + "px";
  const pageHeight = document.getElementById("pageHeight").value + "px";
  
  const preview = document.getElementById("preview");
  preview.innerHTML = "";
  
  // Create cover page if image exists
  if (coverImageSrc) {
    const coverPage = document.createElement("div");
    coverPage.className = "page";
    coverPage.style.fontFamily = fontFamily;
    coverPage.style.fontSize = fontSize;
    coverPage.style.color = txtColor;
    coverPage.style.width = pageWidth;
    coverPage.style.minHeight = pageHeight;
    coverPage.style.lineHeight = lineHeight;
    
    coverPage.innerHTML = `
      <div class="page-cover">
        <img src="${coverImageSrc}" alt="${bookTitle}">
        ${includeMeta ? `<h2>${bookTitle}</h2><p>by ${authorName}</p>` : ''}
      </div>
    `;
    
    preview.appendChild(coverPage);
  }
  
  // Split into chapters
  const chapters = autoDetectChapters(currentText);
  
  // Process each chapter
  pages = [];
  chapters.forEach((chapter, chapterIndex) => {
    const chapterPages = splitIntoPages(chapter.content, wordsPerPage);
    
    chapterPages.forEach((page, pageIndex) => {
      const pageElement = document.createElement("div");
      pageElement.className = "page";
      pageElement.style.fontFamily = fontFamily;
      pageElement.style.fontSize = fontSize;
      pageElement.style.color = txtColor;
      pageElement.style.width = pageWidth;
      pageElement.style.minHeight = pageHeight;
      pageElement.style.lineHeight = lineHeight;
      pageElement.style.padding = `${marginTop} ${marginRight} ${marginBottom} ${marginLeft}`;
      
      // Create container for content and footer
      const pageContainer = document.createElement("div");
      pageContainer.className = "page-container";
      
      // Add content
      const contentDiv = document.createElement("div");
      contentDiv.className = "page-content";
      
      // Chapter title for first page of chapter
      if (pageIndex === 0 && chapter.title !== "Untitled") {
        contentDiv.innerHTML += `<h2 style="text-align:center;margin-bottom:30px">${chapter.title}</h2>`;
      }
      
      contentDiv.innerHTML += `<div class="content">${page.content.replace(/\n/g, "<br>")}</div>`;
      
      // Add footer
      if (includeMeta) {
        const footerDiv = document.createElement("div");
        footerDiv.className = "footer";
        footerDiv.innerHTML = `
          <span>${bookTitle} - ${authorName}</span>
          <span>Page ${pages.length + 1}</span>
        `;
        pageContainer.appendChild(footerDiv);
      }
      
      pageContainer.insertBefore(contentDiv, pageContainer.firstChild);
      pageElement.appendChild(pageContainer);
      preview.appendChild(pageElement);
      
      // Store page data for export
      pages.push({
        element: pageElement,
        content: page.content,
        pageNumber: pages.length + 1
      });
    });
  });
}

function cleanTextForProcessing(text) {
  return text
    .replace(/\r\n/g, '\n')
    .replace(/[`~^*+=|<>{}_]/g, '')
    .replace(/\n{3,}/g, '\n\n')
    .replace(/[^\S\n]{2,}/g, ' ')
    .trim();
}

function autoDetectChapters(text) {
  const lines = text.split(/\n/);
  const result = [];
  let currentChapter = { title: "Untitled", content: [] };
  
  for (let line of lines) {
    const match = line.match(/^#\s*(.+?)\s*$/);
    if (match) {
      if (currentChapter.content.length > 0 || currentChapter.title !== "Untitled") {
        result.push(currentChapter);
      }
      currentChapter = { title: match[1].trim(), content: [] };
    } else {
      currentChapter.content.push(line);
    }
  }
  
  if (currentChapter.content.length > 0 || currentChapter.title !== "Untitled") {
    result.push(currentChapter);
  }
  
  return result.length > 0 ? result : [{ title: "Untitled", content: lines }];
}

function splitIntoPages(content, wordsPerPage = 500) {
  const paragraphs = content.join('\n').split(/\n{2,}/).filter(p => p.trim().length > 0);
  const result = [];
  let currentPage = { content: [], wordCount: 0 };
  
  for (let para of paragraphs) {
    const paraWords = para.trim().split(/\s+/);
    const wordCount = paraWords.length;
    
    if (currentPage.wordCount + wordCount > wordsPerPage && currentPage.content.length > 0) {
      result.push({
        content: currentPage.content.join("\n\n"),
        wordCount: currentPage.wordCount
      });
      currentPage = { content: [para], wordCount: wordCount };
    } else {
      currentPage.content.push(para);
      currentPage.wordCount += wordCount;
    }
  }
  
  if (currentPage.content.length > 0) {
    result.push({
      content: currentPage.content.join("\n\n"),
      wordCount: currentPage.wordCount
    });
  }
  
  return result;
}

// Export functions
async function exportEbook() {
  if (pages.length === 0) {
    showNotification("Please generate the ebook first", "error");
    return;
  }
  
  const exportPDF = document.getElementById("exportPDF").checked;
  const exportPNG = document.getElementById("exportPNG").checked;
  const addWatermark = document.getElementById("useWatermark").checked;
  const watermarkText = document.getElementById("watermarkText").value || "Sample Watermark";
  
  if (!exportPDF && !exportPNG) {
    showNotification("Please select at least one export format", "error");
    return;
  }
  
  // Get file name pattern
  const bookTitle = document.getElementById("bookTitle").value.trim() || "ebook";
  const authorName = document.getElementById("authorName").value.trim() || "unknown";
  const fileNamePattern = document.getElementById("fileNamePattern").value || "{title}";
  
  const now = new Date();
  const dateStr = `${now.getFullYear()}-${(now.getMonth()+1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}`;
  
  function formatFileName() {
    return fileNamePattern
      .replace(/{title}/g, bookTitle.toLowerCase().replace(/[^a-z0-9]+/g, '-'))
      .replace(/{author}/g, authorName.toLowerCase().replace(/[^a-z0-9]+/g, '-'))
      .replace(/{date}/g, dateStr);
  }
  
  const baseFileName = formatFileName();
  
  if (exportPDF && exportPNG) {
    exportBothFormatsZIP(baseFileName, addWatermark, watermarkText);
  } else {
    if (exportPDF) exportAsPDF(baseFileName);
    if (exportPNG) exportAsPNG(baseFileName, addWatermark, watermarkText);
  }
}

async function exportBothFormatsZIP(baseFileName, addWatermark, watermarkText) {
  const zip = new JSZip();
  const { jsPDF } = window.jspdf;
  
  // Create PDF
  const pdfDoc = new jsPDF("p", "pt", "a4");
  
  // Process all pages including cover
  const allPages = document.querySelectorAll(".page");
  
  for (let i = 0; i < allPages.length; i++) {
    const page = allPages[i];
    const canvas = await capturePageWithFooter(page);
    const imgData = canvas.toDataURL('image/png');
    
    const width = pdfDoc.internal.pageSize.getWidth();
    const height = (canvas.height * width) / canvas.width;
    
    if (i !== 0) pdfDoc.addPage();
    pdfDoc.addImage(imgData, 'PNG', 0, 0, width, height);
    
    // Add to ZIP as individual PNG if needed
    const pngCanvas = await processCanvasForExport(canvas, addWatermark, watermarkText);
    const pngData = pngCanvas.toDataURL("image/png").replace(/^.*?,/, '');
    zip.file(`${baseFileName}_page_${i+1}.png`, pngData, { base64: true });
  }
  
  // Add PDF to ZIP
  zip.file(`${baseFileName}.pdf`, pdfDoc.output("blob"), { binary: true });
  
  // Generate and download ZIP
  const content = await zip.generateAsync({ type: "blob" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(content);
  link.download = `${baseFileName}_ebook.zip`;
  link.click();
  
  showNotification("Ebook exported successfully as ZIP (PDF + PNG)!");
}

async function exportAsPDF(baseFileName) {
  const { jsPDF } = window.jspdf;
  const pdfDoc = new jsPDF("p", "pt", "a4");
  
  // Process all pages including cover
  const allPages = document.querySelectorAll(".page");
  
  for (let i = 0; i < allPages.length; i++) {
    const page = allPages[i];
    const canvas = await capturePageWithFooter(page);
    const imgData = canvas.toDataURL('image/png');
    
    const width = pdfDoc.internal.pageSize.getWidth();
    const height = (canvas.height * width) / canvas.width;
    
    if (i !== 0) pdfDoc.addPage();
    pdfDoc.addImage(imgData, 'PNG', 0, 0, width, height);
  }
  
  pdfDoc.save(`${baseFileName}.pdf`);
  showNotification("PDF exported successfully with footer!");
}

async function exportAsPNG(baseFileName, addWatermark, watermarkText) {
  const allPages = document.querySelectorAll(".page");
  const zip = new JSZip();
  
  for (let i = 0; i < allPages.length; i++) {
    const page = allPages[i];
    const canvas = await capturePageWithFooter(page);
    const processedCanvas = await processCanvasForExport(canvas, addWatermark, watermarkText);
    const imgData = processedCanvas.toDataURL("image/png").replace(/^.*?,/, '');
    
    zip.file(`${baseFileName}_page_${i+1}.png`, imgData, { base64: true });
  }
  
  const content = await zip.generateAsync({ type: "blob" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(content);
  link.download = `${baseFileName}_pages.zip`;
  link.click();
  
  showNotification("PNG pages exported successfully with footer!");
}

async function capturePageWithFooter(page) {
  // Calculate the total height needed to capture the footer
  const pageHeight = page.offsetHeight;
  const footer = page.querySelector('.footer');
  const footerHeight = footer ? footer.offsetHeight : 0;
  const captureHeight = pageHeight + footerHeight + 20; // Add extra margin
  
  return await html2canvas(page, { 
    scale: 2,
    useCORS: true,
    allowTaint: true,
    windowHeight: captureHeight,
    scrollY: 0,
    onclone: (clonedDoc) => {
      // Ensure all styles are properly cloned
      const clonedPage = clonedDoc.querySelector('.page');
      if (clonedPage) {
        clonedPage.style.overflow = 'visible';
        clonedPage.style.position = 'relative';
      }
    }
  });
}

async function processCanvasForExport(canvas, addWatermark, watermarkText) {
  if (!addWatermark) return canvas;
  
  const tempCanvas = document.createElement("canvas");
  tempCanvas.width = canvas.width;
  tempCanvas.height = canvas.height;
  const ctx = tempCanvas.getContext("2d");
  
  // Draw original image
  ctx.drawImage(canvas, 0, 0);
  
  // Add watermark
  ctx.fillStyle = "rgba(0,0,0,0.1)";
  ctx.font = "bold 60px Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  
  // Calculate diagonal watermark
  ctx.save();
  ctx.translate(canvas.width/2, canvas.height/2);
  ctx.rotate(-0.3); // 20 degree angle
  
  // Draw watermark text multiple times for better visibility
  for (let y = -canvas.height; y < canvas.height*2; y += 200) {
    for (let x = -canvas.width; x < canvas.width*2; x += 400) {
      ctx.fillText(watermarkText, x, y);
    }
  }
  ctx.restore();
  
  return tempCanvas;
}

// Close dropdown when clicking outside
window.onclick = function(event) {
  if (!event.target.matches('.dropdown-btn')) {
    const dropdowns = document.getElementsByClassName("dropdown-content");
    for (let i = 0; i < dropdowns.length; i++) {
      const openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show-dropdown')) {
        openDropdown.classList.remove('show-dropdown');
      }
    }
  }
}
  </script>
</body>
</html>
